# 类和对象

## 第十节 类定义的相互依赖与类的前项声明

类 A 和类 B 直接依赖，一般避免这种设计，而是引入一个新类，让 A 类和 B 类都依赖于这个新类，从而打破这种两个类的依赖关系。

```cpp
class A {
public:
    B* b;
};

class B {
public:
    A* a;
};
```

上述代码中，A 类与 B 类相互依赖，这样程序会报错。解决方法就是在类定义之前加**类的前项声明**。

```cpp
class A;	// 类的前项声明
class B;	// 类的前项声明

class A {
public:
    B* b;
};

class B {
public:
    A* a;
};
```

类的前项声明并不是类的完整定义，有时候必须要类的完整定义而不是类的前项声明，包括以下情况：

- 在类中有其他类的对象
- 在类中计算其他类的大小
- 在类中调用其他类的成员函数

但是类的指针就可以，这是为什么呢？

​	究其原因，还是==**内存分配**==的问题，如果类内定义一个指针，不管什么类型，都有确定的大小，但当定义一个类对象的时候，若不知道类的定义就不知道对象的大小，也就无法为其分配内存，所以仅仅类的前项声明是不可以的。

总之，避免类与类相互依赖，尽可能将类抽离出来，让这两个类共同依赖别的类。