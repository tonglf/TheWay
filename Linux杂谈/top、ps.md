# top、ps

**top、ps 命令都是用于查看进程信息的命令。**

## top

**top 命令是Linux 下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，类似于Windows 的任务管理器。**

![在这里插入图片描述](https://img-blog.csdnimg.cn/20210627082640651.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NTg2NzM4Mg==,size_16,color_FFFFFF,t_70)

- 第1 行分别显示：**系统当前时间**、**系统运行时间**、**当前用户登录数**和**系统负载**。系统负载（ load average ），这里有3 个数值，分别是系统最近lmin 、5min 、15min 的平均负载。一般对于单个处理器来说，负载在 0 ~ 1.00 是正常的，超过 1.00 就要引起注意了。在多核处理器中，系统均值不应该高于处理器核心的总数。
- 第2 行分别显示： **total （进程总数）**、**running （正在运行的进程数）**、**sleeping （睡眠的进程数）**、**stopped （停止的进程数）**和 **zombie （僵尸进程数）** 。
- 第3 行分别显示： **%us（用户空间占用CPU 百分比）**、**%sy（内核空间占用CPU 百分比）**、**%ni（用户进程空间内改变过优先级的进程占用CPU 百分比）**、**%id （空闲CPU 百分比）**、**%wa （等待输入输出（ 1/0 ）的CPU 时间百分比）**、**%hi ( cpu 处理硬件中断的时间）**、**%si ( cpu 处理软中断的时间）**、**%st （用于有虚拟cpu 的情况）** 。==通常id% 值可以反映一个系统cpu 的闲忙程度==。
- 第4 行则==显示内存 MEM 的数据==： **total （物理内存总量）**、**used （使用的物理内存总量）**、**free （空闲内存总量）**、**buffers （用作内核缓存的内存量）** 。
- 第5 行则==显示交换器SWAP 的数据==： **total （交换区总量）**、**used （使用的交换区总量）**、**free （空闲交换区总量 ）** 、**cached （缓冲的交换区总量）** 。buffers 和cached 的区别需要说明一下， buffers 指的是块设备的读写缓冲区， cached 指的是文件系统本身的页面缓存。它们都是Linux 操作系统底层的机制，目的就是为了加速对磁盘的访问。
- 第6 行则显示**PID（进程号）** 、**USER（运行用户）**、**PR（优先级）**、**NI（任务 nice 值）**、**VIRT （虚拟内存用量）VIRT = SWAP+RES,RES（物理内存用量）**、**SHR（共享内存用量）**、**S（进程状态）**、**%CPU(CPU 占用比）**、**%MEM （物理内存占用比）**、**TIME+ （累计CPU 占用时间）**、**COMMAND 命令名／命令行**。

top 命令显示系统当前的进程和其他状况， top 是一个动态显示过程，即可以通过用户按键来不断刷新当前状态。如果在前台执行该命令，它将独占前台，直到用户终止该程序为止。比较准确地说， **top 命令提供了实时地对系统处理器的状态监视**。它将显示系统中CPU最“敏感”的任务列表。该命令可以按CPU 使用、内存使用和执行时间对任务进行排序；而且该命令的很多特性都可以通过交互式命令或者在个人定制文件中进行设定。

输入“ q ”，则退出top 命令。

## ps

Linux 中的 ps (process status ）命令列出的是**当前在运行的进程的快照**，就是执行ps 命令的那个时刻的那些进程，如果想要动态地显示进程信息，就可以使用top 命令。

要对进程进行监测和控制，首先必须要了解当前进程的情况，也就是需要查看当前进程，而ps 命令就是最基本同时也是非常强大的进程查看命令。使用该命令可以确定有哪些进程正在运行及其运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等。

ps 命令提供进程的一次性的查看，它所提供的查看结果并不动态连续的；如果想对进程时间监控，应该用top 命令。

**Linux 上进程有5 种状态，如下所述：**
1 ）运行（正在运行或在运行队列中等待） 。
2 ）中断（休眠中，受阻，在等待某个条件的形成或接受到信号） 。
3 ）不可中断（收到信号不唤醒和不可运行，进程必须等待直到有中断发生） 。
4 ）僵死（进程已终止，但进程描述符存在，直到父进程调用wait4 （）系统调用后释放） 。
5 ）停止（进程收到SIGSTOP, SIGSTP, SIGT肘， SIGTOU 信号后停止运行运行） 。

**ps 工具标识进程的5 种状态码，如下所述：**
1 ) D 不可中断： uninterruptible sleep (usually IO ） 。
2) R 运行： runnable (on run queue ） 。
3) s 中断： sleeping 。
4 ) T 停止： traced or stopped 。
5 ) z 僵死： a defunct (” zombie ”) process 。
命令格式是： ps ［参数］ 。命令功能是用来显示当前进程的状态。

### ps 命令常用参数

|   参数    |             功能             |
| :-------: | :--------------------------: |
|     a     |         显示所有进程         |
|    -a     |   显示同一终端下的所行程序   |
|    -A     |         显示所有进程         |
|     c     |      显示进程的其实名称      |
|    -e     |        -e 等于“－A ”         |
|     e     |         显示环境变量         |
|     f     |       显示程序间的关系       |
|    -H     |         显示树状结构         |
|     r     |      显示当前终端的进程      |
|     T     |    显示当前终端的所有程序    |
|     u     |      指定用户的所有进程      |
|    -au    |       显示较详细的资讯       |
|   -aux    | 显示所有包含其他使用者的行程 |
|    -C     |      列出指定命令的状况      |
|  --help   |         显示帮助信息         |
| --version |           显示版本           |

### ps 命令使用实例

- **显示指定用户信息。**
  命令： ps -u sharexu

- **显示所有进程信息，连同命令行。**
  命令： ps -ef

- **ps 与grep 常用组合用法， 查找特定进程。**
  命令： ps -e | grep test

- **将目前登人的 PID 与相关信息列示出来。**
  命令： ps -l

- **列出目前所有的正在内存当中的程序。**
  命令： ps aux